:root {
    --portland-blue: #2247fe;
    --portland-green: #80c940;
    --portland-orange: #fb7f31;
    --portland-teal: #76d0ce;
    --portland-yellow: #ffc601;
    --white: #ffffff;
    --light-gray: #f8f9fa;
    --medium-gray: #6c757d;
    --dark-gray: #343a40;
    --border-gray: #dee2e6;
    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.15);
    --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.2);
}

* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    color: var(--dark-gray);
    line-height: 1.6;
    overflow: hidden; /* Full screen - no scroll bars */
    height: 100vh;
}

.app-header {
    background: linear-gradient(135deg, var(--portland-orange) 0%, #e86b2a 100%);
    color: var(--white);
    padding: 0.75rem 0; /* Reduced padding for more space */
    box-shadow: var(--shadow-lg);
    position: relative;
    z-index: 1000;
    flex-shrink: 0;
}
.header-container {
    max-width: none; /* Full width */
    margin: 0;
    padding: 0 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 2rem;
}
.header-left {
    display: flex;
    align-items: center;
    gap: 1.5rem;
}
.city-logo-clean {
    height: 50px; /* Reduced size */
    width: auto;
    background: none !important;
    border: none !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    padding: 0 !important;
    margin: 0 !important;
    filter: brightness(0) invert(1);
    transition: opacity 0.3s ease;
    display: block;
    object-fit: contain;
}
.city-logo-clean:hover { opacity: 0.9; }
.header-text { flex: 1; }
.app-title {
    font-size: 1.6rem; /* Slightly smaller */
    font-weight: 700;
    margin-bottom: 0.125rem;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}
.app-subtitle { font-size: 0.9rem; opacity: 0.9; font-weight: 400; }
.header-stats { display: flex; gap: 1.5rem; }
.stat-card {
    background: rgba(255,255,255,0.15);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 12px;
    padding: 0.75rem 1.25rem; /* Reduced padding */
    display: flex;
    align-items: center;
    gap: 1rem;
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
}
.stat-card:hover { background: rgba(255,255,255,0.2); transform: translateY(-2px); }
.stat-icon { font-size: 1.25rem; display: flex; align-items: center; justify-content: center; width: 35px; height: 35px; border-radius: 8px; }
.blue-icon  { background: rgba(34, 71, 254, 0.3);}
.green-icon { background: rgba(128,201,64,0.3);}
.stat-info { display: flex; flex-direction: column; align-items: flex-start; }
.stat-number { font-size: 1.3rem; font-weight: 700; line-height: 1; }
.stat-label { font-size: .8rem; opacity: .8; font-weight: 500; }

/* FULL SCREEN Main container */
.main-container {
    display: flex;
    flex-direction: row;
    height: calc(100vh - 90px); /* Use remaining screen height */
    width: 100vw;
    gap: 0; /* Remove gaps for full screen */
    padding: 0; /* Remove padding for full screen */
    overflow: hidden;
    box-sizing: border-box;
}

/* Left: Search - Smaller */
.search-panel {
    width: 280px; /* Reduced width */
    min-width: 280px;
    background: var(--white);
    box-shadow: 2px 0 8px rgba(0,0,0,0.1); /* Right shadow only */
    padding: 1.25rem;
    display: flex;
    flex-direction: column;
    gap: 1rem; /* Reduced gap */
    overflow: hidden;
    z-index: 100;
}
.search-container { position: relative; }
.search-input-wrapper { position: relative; display: flex; align-items: center; }
.search-input { width: 100%; padding: 0.75rem 1rem; padding-right: 2.5rem; border: 2px solid var(--border-gray); border-radius: 8px; font-size: 0.9rem; transition: all 0.3s ease; background: var(--white);}
.search-input:focus { outline: none; border-color: var(--portland-blue); box-shadow: 0 0 0 3px rgba(34,71,254,0.1);}
.clear-search { position: absolute; right: .5rem; background: none; border: none; font-size: 1.1rem; color: var(--medium-gray); cursor: pointer; padding: .25rem; border-radius: 4px; transition: all 0.2s;}
.clear-search:hover { background: var(--light-gray); color: var(--dark-gray);}
.search-results { position: absolute; top: 100%; left: 0; right: 0; background: var(--white); border: 1px solid var(--border-gray); border-radius: 8px; box-shadow: var(--shadow-md); max-height: 250px; overflow-y: auto; z-index: 1000; margin-top: .5rem;}
.search-results.hidden{display:none;}
.search-result-item{padding:0.75rem 1rem;border-bottom:1px solid var(--border-gray);cursor:pointer;transition:background-color 0.2s;}
.search-result-item:last-child{border-bottom:none;}
.search-result-item:hover{background:var(--light-gray);}
.search-result-item.no-results{color: var(--medium-gray); font-style: italic; cursor: default;}
.search-result-item.no-results:hover{background: var(--white);}
.result-main{font-weight:600;color:var(--dark-gray);margin-bottom:.25rem;font-size:0.9rem;}
.result-sub{font-size:.8rem;color:var(--medium-gray);}
.control-buttons { display: flex; gap: .5rem;}
.control-btn{flex:1;padding:.6rem 0.8rem;background:var(--portland-blue);color:var(--white);border:none;border-radius:6px;font-size:.8rem;font-weight:600;cursor:pointer;transition:all 0.3s;display:flex;align-items:center;justify-content:center;gap:.5rem;}
.control-btn:hover{background:#1a3bcc;transform:translateY(-1px);}
.control-btn.secondary{background:var(--medium-gray);}
.control-btn.secondary:hover{background:var(--dark-gray);}

/* Middle: Map view - Takes remaining space */
.map-panel {
    flex: 1;
    background: var(--white);
    overflow: hidden;
    position: relative;
    min-width: 400px;
}
#viewDiv { height: 100%; width: 100%; }

/* Right: Details - Always visible with instructions */
.details-panel {
    width: 380px; /* Fixed width */
    min-width: 380px;
    background: var(--white);
    position: relative;
    overflow: hidden;
    box-shadow: -2px 0 8px rgba(0,0,0,0.1); /* Left shadow */
    z-index: 100;
}
.details-header {
    background: linear-gradient(135deg, var(--portland-blue) 0%, #1a3bcc 100%);
    color: var(--white);
    padding: 1rem 1.25rem;
    position: relative;
    flex-shrink: 0;
}
.details-title { font-size: 1.1rem; font-weight: 700; margin: 0;}
.close-details { position: absolute; top: 0.75rem; right: 1rem; background: rgba(255,255,255,0.2); border: none; color: var(--white); font-size: 1.25rem; width: 2rem; height: 2rem; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s;}
.close-details:hover{background:rgba(255,255,255,0.3);}
.details-content { 
    height: calc(100% - 70px); 
    overflow-y: auto; 
    scroll-behavior: smooth;
}
.details-content::-webkit-scrollbar { width: 4px;}
.details-content::-webkit-scrollbar-track { background: var(--light-gray);}
.details-content::-webkit-scrollbar-thumb { background: var(--medium-gray); border-radius: 2px;}
.details-content::-webkit-scrollbar-thumb:hover {background: var(--dark-gray);}

/* Instructions section */
.instruction-section {
    padding: 1.5rem;
    text-align: center;
    background: linear-gradient(135deg, rgba(34, 71, 254, 0.05) 0%, rgba(34, 71, 254, 0.02) 100%);
    border-left: 4px solid var(--portland-blue);
}
.instruction-content {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: center;
}
.instruction-content p {
    font-size: 1rem;
    line-height: 1.5;
    margin: 0.5rem 0;
}
.legend-guide {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin: 1rem 0;
    padding: 1rem;
    background: var(--white);
    border-radius: 8px;
    border: 1px solid var(--border-gray);
}
.legend-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-weight: 500;
}
.legend-dot {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 2px solid white;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
.blue-dot { background: var(--portland-blue); }
.green-dot { background: var(--portland-green); }
.instruction-tip {
    font-style: italic;
    color: var(--medium-gray);
    font-size: 0.9rem;
    margin-top: 1rem;
    padding: 0.75rem;
    background: rgba(255, 204, 0, 0.1);
    border-radius: 6px;
    border-left: 3px solid #ffcc00;
}

/* Standard details sections */
.details-section{padding:1.25rem;border-bottom:1px solid var(--border-gray);}
.details-section:last-child{border-bottom:none;}
.section-title{font-size:1rem;font-weight:700;color:var(--portland-blue);margin-bottom:1rem;display:flex;align-items:center;gap:.5rem;}
.detail-group{display:flex;flex-direction:column;gap:1rem;}
.detail-group.priority{background:linear-gradient(135deg,rgba(34,71,254,0.05) 0%,rgba(34,71,254,0.02) 100%);padding:1rem;border-radius:8px;border-left:4px solid var(--portland-blue);}
.detail-item{display:flex;flex-direction:column;gap:.25rem;}
.detail-item label{font-size:.8rem;font-weight:600;color:var(--medium-gray);text-transform:uppercase;letter-spacing:.5px;}
.detail-value{font-size:0.95rem;color:var(--dark-gray);font-weight:500;padding:.5rem 0;}
.address-highlight{font-size:1rem;font-weight:700;color:var(--portland-blue);}
.account-highlight{font-size:1rem;font-weight:600;color:var(--portland-green);}
.detail-input{padding:.75rem 1rem;border:2px solid var(--border-gray);border-radius:8px;font-size:0.95rem;transition:all 0.3s;background:var(--white);}
.detail-input:focus{outline:none;border-color:var(--portland-blue);box-shadow:0 0 0 3px rgba(34,71,254,0.1);}
.edit-actions{display:flex;gap:0.75rem;margin-top:1rem;}
.btn{padding:.75rem 1rem;border:none;border-radius:8px;font-size:.85rem;font-weight:600;cursor:pointer;transition:all 0.3s;display:flex;align-items:center;justify-content:center;gap:.5rem;}
.btn-primary{background:var(--portland-green);color:var(--white);flex:1;}
.btn-primary:hover{background:#6bb034;transform:translateY(-1px);}
.btn-secondary{background:var(--medium-gray);color:var(--white);flex:1;}
.btn-secondary:hover{background:var(--dark-gray);transform:translateY(-1px);}
.edit-section{background:linear-gradient(135deg,rgba(128,201,64,0.05) 0%,rgba(128,201,64,.02) 100%);border-left:4px solid var(--portland-green);}

/* Loading and Toast - same as before */
.loading-indicator{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,0.9);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:10000;backdrop-filter:blur(5px);}
.loading-indicator.hidden{display:none;}
.loading-spinner{width:50px;height:50px;border:4px solid var(--border-gray);border-top:4px solid var(--portland-orange);border-radius:50%;animation:spin 1s linear infinite;margin-bottom:1rem;}
@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
.loading-text{font-size:1rem;font-weight:600;color:var(--dark-gray);}
.toast{position:fixed;bottom:2rem;right:2rem;background:var(--white);border-radius:12px;box-shadow:var(--shadow-lg);z-index:10001;transform:translateX(100%);transition:transform 0.3s;max-width:350px;}
.toast.show{transform:translateX(0);}
.toast-content{padding:1rem 1.25rem;display:flex;align-items:center;gap:.75rem;}
.toast-icon{font-size:1.1rem;flex-shrink:0;}
.toast-message{font-weight:600;color:var(--dark-gray);font-size:0.9rem;}
.toast-success{border-left:4px solid var(--portland-green);}
.toast-error{border-left:4px solid #dc3545;}
.toast-info{border-left:4px solid var(--portland-blue);}

/* Responsive - collapse to mobile */
@media (max-width:1024px){
    .main-container{flex-direction:column;height:calc(100vh - 90px);}
    .search-panel{width:100%;height:auto;max-height:150px;}
    .map-panel{flex:1;min-height:300px;}
    .details-panel{width:100%;height:300px;box-shadow: 0 -2px 8px rgba(0,0,0,0.1);}
}
